import React, { Component } from 'react'

class ResetDataBase extends Component {

  constructor() {
    super()
    this.state = {
      isDone: false
    }

    this.handleReset = this.handleReset.bind(this)
  }
  
    handleReset(){
        //var products = {"124327020":{"category":"vegetables","id":124327020,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/tomato.jpg","name":"Tomato - 1 Kg","price":16},"387779195":{"category":"vegetables","id":387779195,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/cucumber.jpg","name":"Cucumber - 1 Kg","price":48},"532881044":{"category":"vegetables","id":532881044,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/capsicum.jpg","name":"Capsicum","price":60},"637691396":{"category":"vegetables","id":637691396,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/cauliflower.jpg","name":"Cauliflower - 1 Kg","price":60},"722743390":{"category":"fruits","id":722743390,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/apple.jpg","name":"Apple - 1 Kg","price":72},"758398173":{"category":"fruits","id":758398173,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/water-melon.jpg","name":"Water Melon - 1 Kg","price":28},"917155762":{"category":"fruits","id":917155762,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/mango.jpg","name":"Mango - 1 Kg","price":75},"1245318634":{"category":"fruits","id":1245318634,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/orange.jpg","name":"Orange - 1 Kg","price":75},"1343361730":{"category":"vegetables","id":1343361730,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/corn.jpg","name":"Corn - 1 Kg","price":75},"1503448783":{"category":"vegetables","id":1503448783,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/beetroot.jpg","name":"Beetroot - 1 Kg","price":32},"1635465548":{"category":"vegetables","id":1635465548,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/onion.jpg","name":"Onion - 1 Kg","price":16},"1862463945":{"category":"nuts","id":1862463945,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/walnuts.jpg","name":"Walnuts - 1/4 Kg","price":170},"2077694063":{"category":"vegetables","id":2077694063,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/carrots.jpg","name":"Carrot - 1 Kg","price":56},"3705096408":{"category":"nuts","id":3705096408,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/cashews.jpg","name":"Cashews - 1 Kg","price":650},"3997343786":{"category":"fruits","id":3997343786,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/grapes.jpg","name":"Grapes - 1 Kg","price":60},"8659998074":{"category":"vegetables","id":8659998074,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/broccoli.jpg","name":"Brocolli - 1 Kg","price":120},"7297918260":{"category":"vegetables","id":7297918260,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/beans.jpg","name":"Beans - 1 Kg","price":82},"7013136197":{"category":"vegetables","id":7013136197,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/brinjal.jpg","name":"Brinjal - 1 Kg","price":35},"7382743371":{"category":"vegetables","id":7382743371,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/button-mushroom.jpg","name":"Mushroom - 1 Kg","price":75},"6539721592":{"category":"vegetables","id":6539721592,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/potato.jpg","name":"Potato - 1 Kg","price":22},"9842783065":{"category":"vegetables","id":9842783065,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pumpkin.jpg","name":"Pumpkin - 1 Kg","price":48},"4587782985":{"category":"fruits","id":4587782985,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/banana.jpg","name":"Banana - 1 Kg","price":45},"9561746744":{"category":"fruits","id":9561746744,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/musk-melon.jpg","name":"Musk Melon - 1 Kg","price":36},"9996478654":{"category":"fruits","id":9996478654,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pears.jpg","name":"Pears - 1 Kg","price":69},"7326115795":{"category":"fruits","id":7326115795,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pomegranate.jpg","name":"Pomegranate - 1 Kg","price":95},"6372220401":{"category":"fruits","id":6372220401,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/raspberry.jpg","name":"Raspberry - 1/4 Kg","price":160},"8120422173":{"category":"fruits","id":8120422173,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/strawberry.jpg","name":"Strawberry - 1/4 Kg","price":180},"6947025569":{"category":"nuts","id":6947025569,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/almonds.jpg","name":"Almonds - 1/4 Kg","price":200},"9462334292":{"category":"nuts","id":9462334292,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pista.jpg","name":"Pista - 1/4 Kg","price":190},"5616951939":{"category":"nuts","id":5616951939,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/nuts-mixture.jpg","name":"Nuts Mixture - 1 Kg","price":950}}
        var products = [{"category":"nuts","id":0,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/walnuts.jpg","name":"Walnuts - 1/4 Kg","price":170},{"category":"vegetables","id":1,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/broccoli.jpg","name":"Brocolli - 1 Kg","price":120},{"category":"vegetables","id":2,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/cauliflower.jpg","name":"Cauliflower - 1 Kg","price":60},{"category":"vegetables","id":3,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/cucumber.jpg","name":"Cucumber - 1 Kg","price":48},{"category":"vegetables","id":4,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/beetroot.jpg","name":"Beetroot - 1 Kg","price":32},{"category":"vegetables","id":5,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620046/dummy-products/carrots.jpg","name":"Carrot - 1 Kg","price":56},{"category":"vegetables","id":6,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/tomato.jpg","name":"Tomato - 1 Kg","price":16},{"category":"vegetables","id":7,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/beans.jpg","name":"Beans - 1 Kg","price":82},{"category":"vegetables","id":8,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/brinjal.jpg","name":"Brinjal - 1 Kg","price":35},{"category":"vegetables","id":9,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/capsicum.jpg","name":"Capsicum","price":60},{"category":"vegetables","id":10,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/button-mushroom.jpg","name":"Mushroom - 1 Kg","price":75},{"category":"vegetables","id":11,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/potato.jpg","name":"Potato - 1 Kg","price":22},{"category":"vegetables","id":12,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pumpkin.jpg","name":"Pumpkin - 1 Kg","price":48},{"category":"vegetables","id":13,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/corn.jpg","name":"Corn - 1 Kg","price":75},{"category":"vegetables","id":14,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/onion.jpg","name":"Onion - 1 Kg","price":16},{"category":"fruits","id":15,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/apple.jpg","name":"Apple - 1 Kg","price":72},{"category":"fruits","id":16,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/banana.jpg","name":"Banana - 1 Kg","price":45},{"category":"fruits","id":17,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/grapes.jpg","name":"Grapes - 1 Kg","price":60},{"category":"fruits","id":18,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/mango.jpg","name":"Mango - 1 Kg","price":75},{"category":"fruits","id":19,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/musk-melon.jpg","name":"Musk Melon - 1 Kg","price":36},{"category":"fruits","id":20,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/orange.jpg","name":"Orange - 1 Kg","price":75},{"category":"fruits","id":21,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pears.jpg","name":"Pears - 1 Kg","price":69},{"category":"fruits","id":22,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pomegranate.jpg","name":"Pomegranate - 1 Kg","price":95},{"category":"fruits","id":23,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/raspberry.jpg","name":"Raspberry - 1/4 Kg","price":160},{"category":"fruits","id":24,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/strawberry.jpg","name":"Strawberry - 1/4 Kg","price":180},{"category":"fruits","id":25,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/water-melon.jpg","name":"Water Melon - 1 Kg","price":28},{"category":"nuts","id":26,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/almonds.jpg","name":"Almonds - 1/4 Kg","price":200},{"category":"nuts","id":27,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/pista.jpg","name":"Pista - 1/4 Kg","price":190},{"category":"nuts","id":28,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/nuts-mixture.jpg","name":"Nuts Mixture - 1 Kg","price":950},{"category":"nuts","id":29,"image":"https://res.cloudinary.com/sivadass/image/upload/v1493620045/dummy-products/cashews.jpg","name":"Cashews - 1 Kg","price":650}]
        products.map((product,i)=>{
            products[i].isInCart = false
        })
        fetch('https://super-cart.firebaseio.com/products.json',{method:'PUT',body: JSON.stringify(products)})
        .then(res=>res.json)
        .then(resJson=>{
          fetch('https://super-cart.firebaseio.com/cart.json',{method:'PUT',body: JSON.stringify([])})
          .then(res=>res.json)
          .then(res=>{
            this.setState({
              isDone: true
            })
          })
        })
    }

    render() {
      return (
          <div className='reset-database card'>
            {
              this.state.isDone ?
              <h1 className="reset-database__message">Reset Successful</h1> :
              <>
                <h1 className="reset-database__message">This is will reset the products and clears the cart data </h1>
                <button className="reset-database__button" onClick={this.handleReset}>Reset Products</button>
              </>
            }
          </div>
      )
    }
  }

export default ResetDataBase

